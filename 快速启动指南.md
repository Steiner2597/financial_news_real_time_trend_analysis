# âš¡ å¿«é€Ÿå¯åŠ¨æŒ‡å—

> **3 æ­¥å¯åŠ¨ï¼Œ4 ä¸ªç»ˆç«¯ï¼Œ5 åˆ†é’Ÿè¿è¡Œ**

---

## ğŸ“‹ å‡†å¤‡å·¥ä½œï¼ˆåªéœ€ä¸€æ¬¡ï¼‰

### 1ï¸âƒ£ å®‰è£… Python ä¾èµ–

```bash
pip install -r requirements.txt
```

**âš ï¸ é‡è¦**ï¼šCleaner æ¨¡å—éœ€è¦é¢å¤–ä¸‹è½½ NLTK æ•°æ®

```bash
cd cleaner
python download_nltk.py
```

### 2ï¸âƒ£ å¯åŠ¨ Redis

```bash
redis-server
```

> ğŸ’¡ Windows ç”¨æˆ·ï¼šä½¿ç”¨ Redis for Windows æˆ– WSL

---

## ğŸš€ å¯åŠ¨ç³»ç»Ÿï¼ˆæŒ‰é¡ºåºï¼‰

### âš ï¸ å¿…é¡»æŒ‰ä»¥ä¸‹é¡ºåºå¯åŠ¨ï¼Œæ¯ä¸ªå¼€ä¸€ä¸ªç»ˆç«¯ï¼š

| ç»ˆç«¯ | æ¨¡å— | Windowsï¼ˆåŒå‡» batï¼‰ | Linux/Macï¼ˆå‘½ä»¤è¡Œï¼‰ | è¯´æ˜ |
|------|------|-------------------|-------------------|------|
| 1ï¸âƒ£ | **Cleaner** | `cleaner\start_cleaner.bat` | `cd cleaner/event_driven && python cleaner.py` | ç›‘å¬ç­‰å¾… |
| 2ï¸âƒ£ | **Processor** | `processer\start_processor.bat` | `cd processer/Analysis && python processor_event_driven.py` | ç›‘å¬ç­‰å¾… |
| 3ï¸âƒ£ | **Scraper** | `scraper\run.bat` â†’ é€‰æ‹© 2 | `cd scraper && python control_center.py` | è§¦å‘æµç¨‹ |
| 4ï¸âƒ£ | **Backend** | *(æ—  bat)* | `cd visualization/backend && python run.py` | API æœåŠ¡ |

### å‰ç«¯ç•Œé¢

# å‘½ä»¤è¡Œ
cd visualization/frontend
npm install  # é¦–æ¬¡è¿è¡Œ
npm run dev
```

è®¿é—®ï¼šhttp://localhost:3000

---

## ğŸ“ è¯¦ç»†å‘½ä»¤

### ç»ˆç«¯ 1ï¼šCleanerï¼ˆæ•°æ®æ¸…æ´—ï¼‰

**âš ï¸ é¦–æ¬¡ä½¿ç”¨å¿…é¡»å…ˆä¸‹è½½ NLTK æ•°æ®ï¼š**

```bash
cd cleaner
python download_nltk.py
```

**å¯åŠ¨ Cleaner**ï¼š

**Windows**: åŒå‡» `cleaner\start_cleaner.bat`

**Linux/Mac**:
```bash
cd cleaner/event_driven
python cleaner.py
```

**ç­‰å¾…è¾“å‡º**ï¼š
```
========================================
äº‹ä»¶é©±åŠ¨æ•°æ®æ¸…æ´—å™¨
========================================

å¯åŠ¨ä¸­...

ğŸ§ äº‹ä»¶é©±åŠ¨æ•°æ®æ¸…æ´—å™¨å·²å°±ç»ª
ç›‘å¬é¢‘é“: crawler_complete
æŒ‰ Ctrl+C åœæ­¢
```

> ğŸ’¡ æ­¤æ—¶ Cleaner åœ¨ç­‰å¾… Scraper å‘é€é€šçŸ¥ï¼Œä¸ä¼šæœ‰å…¶ä»–è¾“å‡º

---

### ç»ˆç«¯ 2ï¼šProcessorï¼ˆæ•°æ®åˆ†æï¼‰

**Windows**: åŒå‡» `processer\start_processor.bat`

**Linux/Mac**:
```bash
cd processer/Analysis
python processor_event_driven.py
```

**ç­‰å¾…è¾“å‡º**ï¼š
```
========================================
æ•°æ®å¤„ç†å™¨
========================================

ğŸ§ äº‹ä»¶é©±åŠ¨ Processor å·²å¯åŠ¨
ç›‘å¬é¢‘é“: cleaner_complete
æŒ‰ Ctrl+C åœæ­¢
```

> ğŸ’¡ æ­¤æ—¶ Processor åœ¨ç­‰å¾… Cleaner å‘é€é€šçŸ¥ï¼Œä¸ä¼šæœ‰å…¶ä»–è¾“å‡º

---

### ç»ˆç«¯ 3ï¼šScraperï¼ˆæ•°æ®é‡‡é›†ï¼‰- âš¡ è§¦å‘ç‚¹

**Windows**: åŒå‡» `scraper\run.bat`ï¼Œç„¶åé€‰æ‹© **2. Run crawler once (single run)**

**Linux/Mac**:
```bash
cd scraper
python control_center.py
```

**ç­‰å¾…è¾“å‡º**ï¼š
```
ğŸš€ å¼€å§‹çˆ¬å–æ•°æ®...
ğŸ“¡ NewsAPI: XX æ¡
ğŸ“¡ RSS: XX æ¡
ğŸ“¡ Reddit: XX æ¡
...
ï¿½ çˆ¬å–ä»»åŠ¡å®Œæˆ
ğŸ“Š æ€»è®¡é‡‡é›†: XX æ¡æ•°æ®
ğŸ—‘ï¸  æ¸…ç†è¶…è¿‡ 24 å°æ—¶çš„æ—§æ•°æ®...
âœ… æ¸…ç†å®Œæˆ: åˆ é™¤äº† XX æ¡æ—§æ•°æ®
ğŸ“¢ å‘é€å®Œæˆé€šçŸ¥åˆ°é¢‘é“: crawler_complete
```

> ğŸ¯ **æ­¤æ—¶ä¼šè§¦å‘è¿é”ååº”**ï¼š
> 1. Scraper å®Œæˆ â†’ é€šçŸ¥ Cleaner
> 2. Cleaner å¼€å§‹æ¸…æ´— â†’ å®Œæˆåé€šçŸ¥ Processor
> 3. Processor å¼€å§‹åˆ†æ â†’ è¾“å‡ºç»“æœåˆ° Redis

**å›åˆ°ç»ˆç«¯ 1 æŸ¥çœ‹ Cleaner è¾“å‡º**ï¼š
```
[æ”¶åˆ°é€šçŸ¥] å¼€å§‹æ¸…æ´—æ•°æ®...
ğŸ“‹ å¼€å§‹å•æ¬¡æ¸…æ´—ä»»åŠ¡...
âœ… æ¸…æ´—å®Œæˆï¼šXX æ¡æ•°æ®
ğŸ—‘ï¸  æ¸…ç†è¶…è¿‡ 24 å°æ—¶çš„æ—§æ•°æ®...
ğŸ“¢ å‘é€å®Œæˆé€šçŸ¥: cleaner_complete
```

**å›åˆ°ç»ˆç«¯ 2 æŸ¥çœ‹ Processor è¾“å‡º**ï¼š
```
[æ”¶åˆ°é€šçŸ¥] å¼€å§‹å¤„ç†æ•°æ®...
ğŸš€ Processer å¤„ç†å¼€å§‹
ğŸ“¥ åŠ è½½æ•°æ®...
âœ… æˆåŠŸä» Redis è¯»å– XX æ¡æ•°æ®
ğŸ” æ‰§è¡Œæ–‡æœ¬åˆ†æ...
ğŸ“Š ç”Ÿæˆçƒ­è¯æ’è¡Œæ¦œ...
â˜ï¸  ç”Ÿæˆè¯äº‘æ•°æ®...
ğŸ“ˆ ç”Ÿæˆå†å²æ•°æ®...
ğŸ“° ç”Ÿæˆæ–°é—»æµ...
âœ… æ‰€æœ‰å¤„ç†å®Œæˆ
âœ¨ æ•°æ®å¤„ç†å®Œæˆ
```

---

### ç»ˆç«¯ 4ï¼šVisualization Backendï¼ˆAPI æœåŠ¡ï¼‰

```bash
cd visualization/backend
python run.py
```

**ç­‰å¾…è¾“å‡º**ï¼š
```
INFO:     Started server process [xxxxx]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000
```

è®¿é—® API æ–‡æ¡£ï¼šhttp://localhost:8000/docs

---

### ç»ˆç«¯ 5ï¼ˆå¯é€‰ï¼‰ï¼šFrontendï¼ˆå‰ç«¯ç•Œé¢ï¼‰

**Windows**: åŒå‡» `visualization\frontend\start.bat`

**Linux/Mac**:
```bash
cd visualization/frontend
npm install  # é¦–æ¬¡è¿è¡Œéœ€è¦å®‰è£…ä¾èµ–
npm run dev
```

**ç­‰å¾…è¾“å‡º**ï¼š
```
[1/2] ä¾èµ–å·²å®‰è£…ï¼Œè·³è¿‡å®‰è£…æ­¥éª¤
[2/2] æ­£åœ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨...
VITE ready in XXX ms
âœ  Local:   http://localhost:3000/
```

---

## âœ… éªŒè¯è¿è¡Œ

### 1. æ£€æŸ¥ Redis æ•°æ®

```bash
# æ£€æŸ¥åŸå§‹æ•°æ®
redis-cli -n 0 llen data_queue

# æ£€æŸ¥æ¸…æ´—åæ•°æ®
redis-cli -n 1 llen clean_data_queue

# æ£€æŸ¥åˆ†æç»“æœ
redis-cli -n 0 keys "processed_data:*"
```

### 2. è®¿é—® API

```bash
# è·å–å¤„ç†ç»“æœ
curl http://localhost:8000/api/results/latest

# æŸ¥çœ‹ API æ–‡æ¡£
æµè§ˆå™¨æ‰“å¼€: http://localhost:8000/docs
```

### 3. è®¿é—®å‰ç«¯ï¼ˆå¦‚æœå¯åŠ¨äº†ï¼‰

æµè§ˆå™¨æ‰“å¼€ï¼šhttp://localhost:5173

---

## ğŸ›‘ åœæ­¢ç³»ç»Ÿ

åœ¨æ¯ä¸ªç»ˆç«¯æŒ‰ `Ctrl+C` åœæ­¢ç›¸åº”æ¨¡å—

æˆ–ä½¿ç”¨è„šæœ¬ï¼š

```bash
stop_all.bat  # Windows
```

---

## â“ å¸¸è§é—®é¢˜

### Q: Cleaner æŠ¥é”™æ‰¾ä¸åˆ° NLTK æ•°æ®ï¼Ÿ

**A**: å¿…é¡»å…ˆè¿è¡Œ `python cleaner/download_nltk.py`

### Q: Redis è¿æ¥å¤±è´¥ï¼Ÿ

**A**: ç¡®ä¿ Redis å·²å¯åŠ¨ï¼š`redis-server`

### Q: Processor æ‰¾ä¸åˆ°æ•°æ®ï¼Ÿ

**A**: æ£€æŸ¥å¯åŠ¨é¡ºåºï¼šå¿…é¡»å…ˆå¯åŠ¨ **Cleaner â†’ Processor â†’ Scraper**

### Q: æ¨¡å—å¯åŠ¨åæ²¡æœ‰ååº”ï¼Ÿ

**A**: è¿™æ˜¯æ­£å¸¸çš„ï¼äº‹ä»¶é©±åŠ¨æ¶æ„ï¼š
- **Cleaner**ï¼šç­‰å¾… `crawler_complete` é€šçŸ¥ï¼ˆScraper å®Œæˆåæ‰ä¼šè§¦å‘ï¼‰
- **Processor**ï¼šç­‰å¾… `cleaner_complete` é€šçŸ¥ï¼ˆCleaner å®Œæˆåæ‰ä¼šè§¦å‘ï¼‰
- **Scraper**ï¼šå¼€å§‹çˆ¬å–æ•°æ®ï¼Œå®Œæˆåè§¦å‘æ•´ä¸ªæµç¨‹

**è§£å†³**ï¼šç¡®ä¿ Scraper å·²å¯åŠ¨å¹¶å®Œæˆçˆ¬å–ï¼ˆçº¦ 1-5 åˆ†é’Ÿï¼‰

### Q: å¦‚ä½•æ¸…ç©ºæ‰€æœ‰æ•°æ®é‡æ–°å¼€å§‹ï¼Ÿ

**A**: 
```bash
redis-cli flushall
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [è‡ªåŠ¨æ•°æ®æ¸…ç†æœºåˆ¶è¯´æ˜.md](è‡ªåŠ¨æ•°æ®æ¸…ç†æœºåˆ¶è¯´æ˜.md) - 24 å°æ—¶æ•°æ®ä¿ç•™ç­–ç•¥
- [å­—æ®µä¸åŒ¹é…ä¿®å¤_idå­—æ®µ.md](å­—æ®µä¸åŒ¹é…ä¿®å¤_idå­—æ®µ.md) - æ•°æ®å­—æ®µè¯´æ˜
- [README.md](README.md) - å®Œæ•´é¡¹ç›®è¯´æ˜

---

## ğŸ¯ å¿«é€Ÿæµ‹è¯•æµç¨‹

### Windows (ä½¿ç”¨ bat è„šæœ¬)

```bash
# 1. å¯åŠ¨ Redis
redis-server

# 2. æ‰“å¼€ 4 ä¸ªç»ˆç«¯ï¼Œä¾æ¬¡åŒå‡»è¿è¡Œï¼š
# ç»ˆç«¯1: cleaner\start_cleaner.batï¼ˆç­‰å¾…é€šçŸ¥ï¼‰
# ç»ˆç«¯2: processer\start_processor.batï¼ˆç­‰å¾…é€šçŸ¥ï¼‰
# ç»ˆç«¯3: scraper\run.bat â†’ é€‰æ‹© 2ï¼ˆè§¦å‘æµç¨‹ï¼‰
# ç»ˆç«¯4: cd visualization/backend && python run.py

# 3. ç­‰å¾… Scraper å®Œæˆçˆ¬å–ï¼ˆçº¦ 1-5 åˆ†é’Ÿï¼‰
# è§‚å¯Ÿç»ˆç«¯1ã€2ä¼šä¾æ¬¡æ”¶åˆ°é€šçŸ¥å¹¶å¼€å§‹å¤„ç†

# 4. éªŒè¯ç»“æœ
curl http://localhost:8000/api/results/latest | python -m json.tool

# 5. ï¼ˆå¯é€‰ï¼‰å¯åŠ¨å‰ç«¯
# åŒå‡»: visualization\frontend\start.bat
# è®¿é—®: http://localhost:3000
```

### Linux/Mac

```bash
# 1. å¯åŠ¨ Redis
redis-server

# 2. æ‰“å¼€ 4 ä¸ªç»ˆç«¯ï¼Œä¾æ¬¡è¿è¡Œï¼š
# ç»ˆç«¯1: cd cleaner/event_driven && python cleaner.pyï¼ˆç­‰å¾…ï¼‰
# ç»ˆç«¯2: cd processer/Analysis && python processor_event_driven.pyï¼ˆç­‰å¾…ï¼‰
# ç»ˆç«¯3: cd scraper && python control_center.pyï¼ˆè§¦å‘ï¼‰
# ç»ˆç«¯4: cd visualization/backend && python run.py

# 3. ç­‰å¾… Scraper å®Œæˆçˆ¬å–ï¼ˆçº¦ 1-5 åˆ†é’Ÿï¼‰

# 4. éªŒè¯ç»“æœ
curl http://localhost:8000/api/results/latest | python -m json.tool

# 5. ï¼ˆå¯é€‰ï¼‰å¯åŠ¨å‰ç«¯
# ç»ˆç«¯5: cd visualization/frontend && npm run dev
# è®¿é—®: http://localhost:5173
```

**å®Œæˆï¼âœ¨ ç³»ç»Ÿå·²å¯åŠ¨å¹¶è¿è¡Œ**
