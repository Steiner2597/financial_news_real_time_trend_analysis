redis:
  host: "localhost"
  port: 6379
  db_in: 0                # åŸå§‹æ•°æ®åœ¨ db0ï¼ˆåªè¯»ï¼‰
  db_out: 1               # æ¸…æ´—ç»“æœ/æ¸¸æ ‡/ç»Ÿè®¡åœ¨ db1
  queue_in: "data_queue"
  queue_out: "clean_data_queue"
  id_cache: "set:cleaned_ids"
  
  # ğŸ†• é˜Ÿåˆ—ç›‘æ§é…ç½®ï¼ˆæ–°æ–¹å¼ï¼šåŸºäº data_queue å˜åŒ–è‡ªåŠ¨è§¦å‘æ¸…æ´—ï¼‰
  queue_monitor:
    enabled: true         # æ˜¯å¦å¯ç”¨é˜Ÿåˆ—ç›‘æ§æ¨¡å¼
    mode: "batched"       # "batched"=æ‰¹é‡æ¨¡å¼ | "realtime"=å®æ—¶æ¨¡å¼
    batch_size: 10        # æ‰¹é‡å¤§å°ï¼ˆbatched æ¨¡å¼ä¸‹ï¼Œç´¯ç§¯å¤šå°‘æ¡è§¦å‘ä¸€æ¬¡æ¸…æ´—ï¼‰
    max_wait_sec: 5.0     # æœ€é•¿ç­‰å¾…æ—¶é—´ï¼ˆå³ä½¿æœªè¾¾åˆ°æ‰¹é‡ä¹Ÿè§¦å‘ï¼‰
    check_interval_sec: 0.5  # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
  
  # é€šçŸ¥ç›‘å¬é…ç½®ï¼ˆä» Scraper æ¥æ”¶ï¼‰- å…¼å®¹æ—§æ¨¡å¼
  notification_listen:
    enabled: false         # âš ï¸ æ”¹ä¸º false - ç°åœ¨ä½¿ç”¨é˜Ÿåˆ—ç›‘æ§è€Œéé€šçŸ¥
    channel: "crawler_complete"  # ç›‘å¬çš„é¢‘é“ï¼ˆä¸ scraper ä¸€è‡´ï¼‰
    mode: "queue_driven"  # è¿è¡Œæ¨¡å¼: "queue_driven"=åŸºäºé˜Ÿåˆ— | "event_driven"=åŸºäºé€šçŸ¥ | "continuous"=æŒç»­è½®è¯¢
  
  # é€šçŸ¥å‘é€é…ç½®ï¼ˆå‘é€ç»™ Processorï¼‰
  notification_send:
    enabled: true         # æ˜¯å¦å‘é€å®Œæˆé€šçŸ¥
    channel: "cleaner_complete"  # é€šçŸ¥é¢‘é“

paths:
  logs: "./logs"          # => project/processing/logs
  samples: "./samples"    # => project/processing/samples
  output: "./output"      # => project/processing/output

sampling:
  sample_rate: 1000       # æ¯ 1000 æ¡æŠ½æ ·ä¸€æ¬¡
  sample_count: 5         # æ¯æ¬¡æŠ½ 5 æ¡

stats:
  enabled: true
  reset_on_start: true
  accepted_key: "stats:accepted"
  discarded_key: "stats:discarded"

reader:
  mode: "cursor"
  cursor_key: "cursor:data_queue"
  batch_size: 200
  poll_interval_ms: 500

monitor:
  progress_every: 50
  rate_window_sec: 10
  idle_rounds_to_finish: 6
  log_level: "info"

# æ–°å¢ï¼šæ­£æ–‡é•¿åº¦æœ€å°é˜ˆå€¼ï¼ˆå°äºæ­¤å€¼ä¸¢å¼ƒï¼‰
text_min_length: 10

# å»é‡ç­–ç•¥
deduplication:
  # å»é‡æ¨¡å¼: "permanent" (æ°¸ä¹…) | "time_window" (æ—¶é—´çª—å£)
  mode: "permanent"
  # mode: "time_window"
  # æ—¶é—´çª—å£ï¼ˆå°æ—¶ï¼‰- åªåœ¨ time_window æ¨¡å¼ä¸‹æœ‰æ•ˆ
  # è¶…è¿‡æ­¤æ—¶é—´çš„ ID ä¼šè¢«è‡ªåŠ¨æ¸…é™¤ï¼Œå…è®¸é‡æ–°å¤„ç†
  # window_hours: 1
  # æ˜¯å¦åœ¨å¯åŠ¨æ—¶æ¸…ç©º ID ç¼“å­˜
  clear_on_start: false

# è¾“å‡ºç›¸å…³
output:
  realtime: false           # true=è¾¹æ¸…æ´—è¾¹å†™ JSONLï¼ˆprocessing/output/cleaned_YYYY-MM-DD.jsonlï¼‰
  realtime_every: 1         # å®æ—¶è¾“å‡ºèŠ‚æµï¼ˆæ¯ N æ¡å†™ä¸€æ¬¡ï¼‰
  pretty_in_redis: false    # true=ä»¥ç¼©è¿›åˆ†è¡Œå†™å…¥ Redisï¼ˆæ–¹ä¾¿ RDM ç›´æ¥è¯»ï¼‰ï¼Œfalse=ç´§å‡‘å•è¡Œï¼ˆçœå­˜å‚¨ï¼‰
