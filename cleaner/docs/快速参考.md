# ğŸš€ Cleaner å¿«é€Ÿå‚è€ƒ

## ä¸€é”®å¯åŠ¨

```bash
cd cleaner
start_cleaner.bat
```

## æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | è¯´æ˜ |
|-----|------|
| `data_cleaner_event_driven.py` | ä¸»å…¥å£æ–‡ä»¶ |
| `start_cleaner.bat` | Windows å¯åŠ¨è„šæœ¬ |
| `config_processing.yaml` | é…ç½®æ–‡ä»¶ |
| `test_single_pass_cleaning.py` | æµ‹è¯•è„šæœ¬ |

## æ ¸å¿ƒæ¨¡å—

```
event_driven/
â”œâ”€â”€ cleaner.py                   # ä¸»æ¸…æ´—å™¨
â”œâ”€â”€ single_pass_cleaner.py       # å•æ¬¡æ¸…æ´—é€»è¾‘ â­
â”œâ”€â”€ redis_manager.py             # Redis ç®¡ç†
â”œâ”€â”€ notification_handler.py      # æ¶ˆæ¯å¤„ç†
â”œâ”€â”€ cache_manager.py             # ç¼“å­˜ç®¡ç†
â””â”€â”€ signal_handler.py            # ä¿¡å·å¤„ç†
```

## å·¥ä½œåŸç†

```
çˆ¬è™«å®Œæˆ â†’ crawler_complete é€šçŸ¥
              â†“
æ¸…æ´—å™¨æ”¶åˆ°é€šçŸ¥ â†’ æ‰§è¡Œ clean_once()
              â†“
æ¸…æ´—å®Œæˆ â†’ cleaner_complete é€šçŸ¥
              â†“
Processor å¼€å§‹å¤„ç†
```

## å…³é”®ç‰¹æ€§

- âœ… **å•æ¬¡å¤„ç†**: ä¸é˜»å¡å¾ªç¯
- âœ… **å¿«é€Ÿå“åº”**: æ”¶åˆ°é€šçŸ¥ç«‹å³å¤„ç†
- âœ… **æ‰¹é‡ä¼˜åŒ–**: 100 æ¡/æ‰¹
- âœ… **è¯¦ç»†ç»Ÿè®¡**: å¤„ç†/æ¸…æ´—/å»é‡/æ— æ•ˆ

## é…ç½®è¦ç‚¹

`config_processing.yaml`:
- `db_in: 0` - ä» Scraper è¯»å–
- `db_out: 1` - å‘é€ç»™ Processor
- `channel: crawler_complete` - ç›‘å¬é¢‘é“
- `channel: cleaner_complete` - å‘é€é¢‘é“

## å¸¸ç”¨å‘½ä»¤

```bash
# äº‹ä»¶é©±åŠ¨æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
python data_cleaner_event_driven.py

# æŒç»­è½®è¯¢æ¨¡å¼
python data_cleaner_event_driven.py --mode continuous

# å•æ¬¡è¿è¡Œ
python data_cleaner_event_driven.py --mode once

# æµ‹è¯•
python test_single_pass_cleaning.py
```

## æ—¥å¿—ä½ç½®

`logs/event_driven_cleaner.log`

## è¾“å‡ºç›®å½•

`output/cleaned_YYYY-MM-DD.jsonl`

---

**å°±è¿™ä¹ˆç®€å•ï¼** ğŸ‰
