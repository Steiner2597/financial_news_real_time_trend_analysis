# 项目整合检查清单

## ✅ 已完成的整合工作

### 📦 统一环境配置
- [x] 创建统一虚拟环境名称: `cs5481project`
- [x] 整合Python依赖到根目录 `requirements.txt`
- [x] 统一Python版本要求: 3.9-3.11

### 🔧 Redis配置统一
- [x] 创建统一配置文件 `config.yaml`
- [x] 定义数据库分配规范 (DB0, DB1)
- [x] 统一键名规范
- [x] 创建配置同步工具 `sync_config.py`

### 📝 文档创建
- [x] `README.md` - 项目主文档
- [x] `快速启动指南.md` - 详细启动说明
- [x] `项目文件清单.md` - 文件结构说明
- [x] `系统架构图.md` - 架构可视化
- [x] `整合完成总结.md` - 整合总结

### 🚀 启动脚本
- [x] `check_env.bat` - 环境检查
- [x] `start_all.bat` - 一键启动
- [x] `stop_all.bat` - 一键停止

### 🔄 工具脚本
- [x] `sync_config.py` - 配置同步工具

---

## 📋 用户使用检查清单

### 首次安装检查

#### 1. 环境准备
```bash
□ Python 3.9-3.11 已安装
  验证: python --version

□ Redis 已安装
  验证: redis-cli --version

□ Node.js 已安装 (前端需要)
  验证: node --version
  验证: npm --version

□ Conda/Miniconda 已安装 (推荐)
  验证: conda --version
```

#### 2. 虚拟环境创建
```bash
□ 创建虚拟环境
  conda create -n cs5481project python=3.10 -y

□ 激活虚拟环境
  conda activate cs5481project

□ 验证环境
  conda env list | findstr cs5481project
```

#### 3. 依赖安装
```bash
□ 安装Python依赖
  pip install -r requirements.txt

□ 验证关键依赖
  python -c "import redis; print('✅ redis')"
  python -c "import fastapi; print('✅ fastapi')"
  python -c "import pandas; print('✅ pandas')"

□ 下载NLTK数据 (Cleaner需要)
  cd cleaner
  python download_nltk.py

□ 安装前端依赖
  cd visualization/frontend
  npm install
```

#### 4. 配置检查
```bash
□ 检查统一配置
  查看: config.yaml

□ (可选) 同步配置到各模块
  python sync_config.py

□ 验证各模块配置
  □ scraper/config.yaml
  □ cleaner/config_processing_dl.yaml
  □ processer/Analysis/config.py
  □ visualization/backend/app/config.py
```

---

### 启动前检查

#### 1. Redis服务
```bash
□ 启动Redis
  Windows: cd scraper && start_redis.bat
  Linux: redis-server

□ 验证Redis运行
  redis-cli ping
  应返回: PONG

□ 检查Redis数据库
  redis-cli
  > SELECT 0
  > KEYS *
  > SELECT 1
  > KEYS *
```

#### 2. 虚拟环境
```bash
□ 激活虚拟环境
  conda activate cs5481project

□ 验证当前环境
  echo %CONDA_DEFAULT_ENV%
  应显示: cs5481project
```

#### 3. 端口占用检查
```bash
□ 检查关键端口是否可用
  6379 - Redis
  8000 - Backend API
  5173 - Frontend UI

Windows检查:
  netstat -ano | findstr :6379
  netstat -ano | findstr :8000
  netstat -ano | findstr :5173
```

---

### 系统启动检查

#### 自动启动方式
```bash
□ 运行环境检查
  check_env.bat

□ 一键启动所有模块
  start_all.bat

□ 验证各模块窗口已打开
  □ Scraper Module
  □ Cleaner Module
  □ Processor Module
  □ Visualization Backend
  □ Visualization Frontend
```

#### 手动启动方式
```bash
□ 步骤1: 启动Scraper
  cd scraper
  python control_center.py
  ✓ 看到爬虫开始运行

□ 步骤2: 启动Cleaner
  cd cleaner
  python data_cleaner_module_dl.py
  ✓ 看到清洗进程启动

□ 步骤3: 启动Processor
  cd processer/Analysis
  python main.py
  ✓ 看到分析器运行

□ 步骤4: 启动Backend
  cd visualization/backend
  python -m backend.app.main
  ✓ 看到FastAPI启动信息

□ 步骤5: 启动Frontend
  cd visualization/frontend
  npm run dev
  ✓ 看到Vite开发服务器启动
```

---

### 运行验证检查

#### 1. Redis数据流检查
```bash
□ 检查DB0原始数据
  redis-cli
  > SELECT 0
  > LLEN data_queue
  应有数字 (Scraper产生的数据)

□ 检查DB1清洗数据
  > SELECT 1
  > LLEN clean_data_queue
  应有数字 (Cleaner产生的数据)

□ 检查DB0处理结果
  > SELECT 0
  > KEYS processed_data:*
  应看到: 
    processed_data:metadata
    processed_data:trending_keywords
    processed_data:word_cloud
    processed_data:news_feed
    processed_data:history_data:*
```

#### 2. Backend API检查
```bash
□ 健康检查
  curl http://localhost:8000/health
  或浏览器访问: http://localhost:8000/health

□ 系统状态
  curl http://localhost:8000/system/status
  或浏览器访问: http://localhost:8000/system/status

□ API文档
  浏览器访问: http://localhost:8000/docs

□ 获取热词数据
  curl http://localhost:8000/api/v1/trends/trending-keywords

□ 获取词云数据
  curl http://localhost:8000/api/v1/wordcloud

□ 获取新闻数据
  curl http://localhost:8000/api/v1/news
```

#### 3. Frontend界面检查
```bash
□ 访问前端界面
  浏览器打开: http://localhost:5173

□ 验证页面元素
  □ 顶部导航栏显示正常
  □ 热词趋势图表可见
  □ 词云组件显示
  □ 新闻列表加载
  □ 数据实时更新

□ 检查浏览器控制台
  无红色错误信息
```

#### 4. 日志检查
```bash
□ Scraper日志
  查看: scraper/logs/*.log
  ✓ 看到采集记录

□ Cleaner日志
  查看: cleaner/logs/runtime.log
  ✓ 看到清洗统计

□ Processor日志
  查看控制台输出
  ✓ 看到分析进度

□ Visualization日志
  查看Backend控制台
  ✓ 看到API请求记录
```

---

## 🐛 故障排查清单

### 问题1: 虚拟环境问题
```
症状: ModuleNotFoundError
□ 确认环境已激活
  conda activate cs5481project
□ 重新安装依赖
  pip install -r requirements.txt
□ 验证Python路径
  which python (Linux/Mac)
  where python (Windows)
```

### 问题2: Redis连接失败
```
症状: Redis connection refused
□ 检查Redis进程
  Windows: tasklist | findstr redis
  Linux: ps aux | grep redis
□ 重启Redis
  停止后重新启动
□ 检查端口
  netstat -ano | findstr :6379
□ 验证配置
  各模块config中的host和port
```

### 问题3: 端口被占用
```
症状: Address already in use
□ 查找占用进程
  netstat -ano | findstr :<端口号>
□ 关闭进程
  taskkill /PID <进程ID> /F
□ 或修改端口
  在相应配置文件中修改
```

### 问题4: 数据不流动
```
症状: Redis有数据但界面无显示
□ 检查所有模块是否运行
  □ Scraper运行中
  □ Cleaner运行中
  □ Processor运行中
  □ Backend运行中
□ 检查Redis数据
  逐个数据库查看键
□ 检查各模块日志
  查找错误信息
□ 验证数据格式
  GET某个键查看内容
```

### 问题5: 前端显示异常
```
症状: 界面空白或报错
□ 检查Backend API
  访问 /health 端点
□ 检查浏览器控制台
  查看错误信息
□ 验证API调用
  Network标签查看请求
□ 清除缓存重试
  Ctrl+Shift+R 强制刷新
```

---

## 📊 性能监控清单

### 1. 系统资源
```bash
□ CPU使用率
  任务管理器 / top 命令

□ 内存使用
  各Python进程内存占用

□ 磁盘空间
  日志和数据文件大小

□ 网络带宽
  爬虫下载速度
```

### 2. Redis性能
```bash
□ 内存使用
  redis-cli INFO memory

□ 键数量
  redis-cli DBSIZE

□ 操作统计
  redis-cli INFO stats

□ 连接数
  redis-cli INFO clients
```

### 3. 数据处理速度
```bash
□ Scraper采集速度
  查看日志中的记录数/时间

□ Cleaner处理速度
  查看日志中的处理进度

□ Processor分析速度
  查看控制台输出

□ API响应时间
  浏览器Network查看
```

---

## ✅ 完整性验证清单

### 环境完整性
- [ ] Python环境正确
- [ ] Redis服务运行
- [ ] 所有依赖已安装
- [ ] 配置文件齐全

### 功能完整性
- [ ] 数据采集正常
- [ ] 数据清洗正常
- [ ] 数据分析正常
- [ ] API响应正常
- [ ] 前端显示正常

### 数据流完整性
- [ ] DB0有原始数据
- [ ] DB1有清洗数据
- [ ] DB0有处理结果
- [ ] API能读取数据
- [ ] 前端能展示数据

### 文档完整性
- [ ] README.md存在
- [ ] 快速启动指南.md存在
- [ ] 各模块文档存在
- [ ] 配置说明清晰

---

## 🎯 日常使用清单

### 每日启动
```bash
1. □ 激活环境
2. □ 启动Redis
3. □ 运行 start_all.bat
4. □ 验证系统运行
5. □ 检查日志无异常
```

### 每日关闭
```bash
1. □ 运行 stop_all.bat
2. □ 或手动关闭各窗口
3. □ 检查进程已退出
4. □ (可选) 关闭Redis
```

### 定期维护
```bash
□ 每周清理日志
  删除过期的日志文件

□ 每周检查Redis
  清理不需要的旧数据

□ 每月更新依赖
  pip list --outdated
  谨慎更新版本

□ 定期备份数据
  导出重要的Redis数据
```

---

## 📞 获取帮助清单

### 自助排查顺序
1. [ ] 查看对应模块日志
2. [ ] 检查Redis数据
3. [ ] 查看快速启动指南
4. [ ] 查看模块专属文档
5. [ ] 搜索常见问题

### 寻求支持
- [ ] 准备完整的错误信息
- [ ] 准备系统环境信息
- [ ] 准备复现步骤
- [ ] 提交Issue到GitHub

---

**检查清单版本**: 1.0  
**最后更新**: 2025-10-27  
**用途**: 确保项目正确安装、配置和运行

---

💡 **提示**: 
- 首次使用请完整过一遍"首次安装检查"
- 日常使用只需"启动前检查"和"日常使用清单"
- 遇到问题参考"故障排查清单"
- 定期执行"定期维护"保持系统健康

🎉 **祝使用顺利！**
